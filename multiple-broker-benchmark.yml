name: Camunda 8 Messung - multiple Broker - benchmark
author: Moritz Schwarz <moritz.schwarz@envite.de>
description: usage_scenario for camunda8experiment

compose-file: !include docker-compose-multiple-broker.yaml

services:
  experiment:
    container_name: experiment
    image: moritz148/measurementsgmt:c8-benchmark
    command: /bin/sh
    environment:
      - CAMUNDA_CLIENT_MODE=self-managed
      - CAMUNDA_CLIENT_ZEEBE_GRPCADDRESS=http://zeebe-gateway:26500
      - ZEEBE_CLIENT_SECURITY_PLAINTEXT=true
      - ZEEBE_CLIENT_CLOUD_ENABLED=false
      - LOGGING_LEVEL_IO_CAMUNDA_ZEEBE_CLIENT_IMPL=ERROR
      - PROCESS_INSTANCES=100
    depends_on:
      zeebe-gateway:
        condition: service_healthy
    restart: "no"
    networks:
      - camunda-platform
#  experiment:
##    image: moritz148/measurementsgmt:c8-benchmark
##    environment:
##      - PROCESS_INSTANCES=100


flow:
  - name: experiment
    container: experiment
    commands:
      - type: console
        command: java -jar demo.jar
        log-stdout: true
#        log-stderr: true